{"version":3,"sources":["webpack:///webpack/bootstrap 5498646d3dc64089f0b2","webpack:///./src/actions.js","webpack:///./src/memory.js","webpack:///./src/main.js","webpack:///./src/role.init.js","webpack:///./src/role.harvester.js","webpack:///./src/role.upgrader.js","webpack:///./src/role.builder.js","webpack:///./src/mainControls.js","webpack:///./src/logger.js"],"names":["actions","moveToSpawn","creep","spawn1","Game","spawns","moveTo","withdrawEnergy","withdrawalStatus","withdraw","RESOURCE_ENERGY","ERR_NOT_IN_RANGE","ERR_NOT_ENOUGH_RESOURCES","memory","role","module","exports","addToQueue","creepSchema","Memory","queue","concat","slice","getQueue","Array","isArray","clearQueue","flushIfNecessary","_","values","creeps","length","creepName","undefined","smallestBody","WORK","CARRY","MOVE","smallCarrier","loop","maintain","processQueue","roles","harvester","require","upgrader","builder","init","run","console","log","moveToEnergySource","sources","room","find","FIND_SOURCES","filter","source","energy","harvest","canStoreEnergy","structure","structureType","STRUCTURE_EXTENSION","STRUCTURE_SPAWN","hasCapacity","energyCapacity","ticksToLive","carry","carryCapacity","targetsWithCapacity","FIND_STRUCTURES","transfer","upgrading","upgradeController","controller","canWork","constructionSites","FIND_CONSTRUCTION_SITES","build","creepRole","creepCount","creepBody","creepsByRole","additionalCreepsRequired","JSON","stringify","body","renewCreep","spawning","name","remainingTime","canCreate","canCreateCreep","OK","createCreep","logger","message","time"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC5DA,IAAMA,UAAU;AACdC,eAAa,SAASA,WAAT,CAAqBC,KAArB,EAAmC;AAC9C,QAAMC,SAASC,KAAKC,MAAL,CAAY,QAAZ,CAAf;AACA,WAAOH,MAAMI,MAAN,CAAaH,MAAb,CAAP;AACD,GAJa;AAKdI,kBAAgB,SAASA,cAAT,CAAwBL,KAAxB,EAAsC;AACpD,QAAMC,SAASC,KAAKC,MAAL,CAAY,QAAZ,CAAf;AACA,QAAMG,mBAAmBN,MAAMO,QAAN,CAAeN,MAAf,EAAuBO,eAAvB,CAAzB;;AAEA,YAAOF,gBAAP;AACE,WAAKG,gBAAL;AACE,eAAOX,QAAQC,WAAR,CAAoBC,KAApB,CAAP;AACF,WAAKU,wBAAL;AACE,eAAOV,MAAMW,MAAN,CAAaC,IAAb,GAAoB,WAA3B;AAJJ;AAMD;AAfa,CAAhB;;AAkBAC,OAAOC,OAAP,GAAiBhB,OAAjB,C;;;;;;;;;AClBAe,OAAOC,OAAP,GAAiB;AACfC,cAAY,oBAACC,WAAD,EAA8B;AACxCC,WAAOC,KAAP,GAAeD,OAAOC,KAAP,CAAaC,MAAb,CAAoBH,WAApB,CAAf;AACA,WAAOC,OAAOC,KAAP,CAAaE,KAAb,EAAP;AACD,GAJc;AAKfC,YAAU,oBAAM;AACd,QAAI,CAACC,MAAMC,OAAN,CAAcN,OAAOC,KAArB,CAAL,EAAkC;AAChCD,aAAOC,KAAP,GAAe,EAAf;AACD;AACD,WAAOD,OAAOC,KAAP,CAAaE,KAAb,EAAP;AACD,GAVc;AAWfI,cAAY,SAASA,UAAT,GAAsB;AAChCP,WAAOC,KAAP,GAAe,EAAf;AACA,WAAOD,OAAOC,KAAP,CAAaE,KAAb,EAAP;AACD,GAdc;AAefK,oBAAkB,4BAAW;AAC3B,QAAIC,EAAEC,MAAF,CAASzB,KAAK0B,MAAd,EAAsBC,MAAtB,KAAiCH,EAAEC,MAAF,CAASV,OAAOW,MAAhB,EAAwBC,MAA7D,EAAqE;AACnE;AACD;;AAED,SAAK,IAAMC,SAAX,IAAwBb,OAAOW,MAA/B,EAAuC;AACrC,UAAI1B,KAAK0B,MAAL,CAAYE,SAAZ,MAA2BC,SAA/B,EAA0C;AACtC,eAAOd,OAAOW,MAAP,CAAcE,SAAd,CAAP;AACH;AACF;AACF;AAzBc,CAAjB,C;;;;;;;;;;;;;;ACGA;;;;AACA;;;;AACA;;;;;;AALA,IAAME,eAAe,CAACC,IAAD,EAAMC,KAAN,EAAYC,IAAZ,CAArB;AACA,IAAMC,eAAe,CAACH,IAAD,EAAMC,KAAN,EAAYA,KAAZ,EAAkBA,KAAlB,EAAwBC,IAAxB,CAArB;;AAMA,SAASE,IAAT,GAAgB;AACZ,qBAAcZ,gBAAd;;AAEA,2BAAaa,QAAb,CAAsB,WAAtB,EAAmC,EAAnC,EAAuCN,YAAvC;AACA,2BAAaM,QAAb,CAAsB,UAAtB,EAAkC,CAAlC,EAAqCN,YAArC;AACA,2BAAaM,QAAb,CAAsB,SAAtB,EAAiC,CAAjC,EAAoCN,YAApC;;AAEA,2BAAaO,YAAb;;AAEA;AACH;;QAEQF,I,GAAAA,I;;AAET;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;AC1BA,IAAMG,QAAQ;AACVC,eAAW,mBAAAC,CAAQ,CAAR,CADD;AAEVC,cAAU,mBAAAD,CAAQ,CAAR,CAFA;AAGVE,aAAS,mBAAAF,CAAQ,CAAR;AAHC,CAAd;;AAMA7B,OAAOC,OAAP,GAAiB,SAAS+B,IAAT,GAAgB;AAC7B,SAAI,IAAMf,SAAV,IAAuB5B,KAAK0B,MAA5B,EAAoC;AAChC,YAAM5B,QAAQE,KAAK0B,MAAL,CAAYE,SAAZ,CAAd;AACA,YAAMlB,OAAO4B,MAAMxC,MAAMW,MAAN,CAAaC,IAAnB,CAAb;;AAEA,YAAIA,SAASmB,SAAb,EAAwB;AACpBnB,iBAAKkC,GAAL,CAAS9C,KAAT;AACH,SAFD,MAEO;AACH+C,oBAAQC,GAAR,CAAY,oBAAZ,EAAkChD,MAAMW,MAAN,CAAaC,IAA/C,EAAqD,eAArD;AACH;AACJ;AACJ,CAXD,C;;;;;;;;;;;;;ACNA;;;;;;AAEA,SAASqC,kBAAT,CAA4BjD,KAA5B,EAA0C;AACtC,QAAMkD,UAAUlD,MAAMmD,IAAN,CAAWC,IAAX,CAAgBC,YAAhB,EAA8B;AAC1CC,gBAAQ,gBAACC,MAAD;AAAA,mBAAYA,OAAOC,MAAP,GAAgB,CAA5B;AAAA;AADkC,KAA9B,CAAhB;AAGA,QAAIN,QAAQrB,MAAR,KAAmB,CAAvB,EAA0B;;AAE1B,QAAG7B,MAAMyD,OAAN,CAAcP,QAAQ,CAAR,CAAd,KAA6BzC,gBAAhC,EAAkD;AAChDT,cAAMI,MAAN,CAAa8C,QAAQ,CAAR,CAAb;AACD;AACJ;;;AAED,SAASQ,cAAT,CAAwBC,SAAxB,EAAmC;AAC/B,WAAOA,UAAUC,aAAV,IAA2BC,mBAA3B,IAAkDF,UAAUC,aAAV,IAA2BE,eAApF;AACH;;AAED,SAASC,WAAT,CAAqBJ,SAArB,EAAgC;AAC5B,WAAOA,UAAUH,MAAV,GAAmBG,UAAUK,cAApC;AACH;;kBAEc;AACblB,SAAK,aAAS9C,KAAT,EAAuB;AAC1B,YAAIA,MAAMiE,WAAN,GAAoB,GAAxB,EAA6B;AACzB,mBAAO,kBAAQlE,WAAR,CAAoBC,KAApB,CAAP;AACH;;AAED,YAAGA,MAAMkE,KAAN,CAAYV,MAAZ,GAAqBxD,MAAMmE,aAA9B,EAA6C;AAC1C,mBAAOlB,mBAAmBjD,KAAnB,CAAP;AACF;;AAED,YAAMoE,sBAAsBpE,MAAMmD,IAAN,CAAWC,IAAX,CAAgBiB,eAAhB,EAAiC;AACzDf,oBAAQ,gBAACK,SAAD;AAAA,uBAAeD,eAAeC,SAAf,KAA6BI,YAAYJ,SAAZ,CAA5C;AAAA;AADiD,SAAjC,CAA5B;;AAIA,YAAGS,oBAAoBvC,MAApB,GAA6B,CAA7B,IAAkC7B,MAAMsE,QAAN,CAAeF,oBAAoB,CAApB,CAAf,EAAuC5D,eAAvC,KAA2DC,gBAAhG,EAAkH;AAC9G,mBAAOT,MAAMI,MAAN,CAAagE,oBAAoB,CAApB,CAAb,CAAP;AACH;;AAED,eAAO,kBAAQrE,WAAR,CAAoBC,KAApB,CAAP;AACD;AAnBY,C;;;;;;;;;ACrBf,IAAMF,UAAU,mBAAA4C,CAAQ,CAAR,CAAhB;;AAEA,IAAMC,WAAW;AAChBG,MAAK,aAAS9C,KAAT,EAAuB;AAC3B,MAAGA,MAAMW,MAAN,CAAa4D,SAAb,IAA0BvE,MAAMkE,KAAN,CAAYV,MAAZ,IAAsB,CAAnD,EAAsD;AACrDxD,SAAMW,MAAN,CAAa4D,SAAb,GAAyB,KAAzB;AACC;;AAED,MAAG,CAACvE,MAAMW,MAAN,CAAa4D,SAAd,IAA2BvE,MAAMkE,KAAN,CAAYV,MAAZ,IAAsBxD,MAAMmE,aAA1D,EAAyE;AACxEnE,SAAMW,MAAN,CAAa4D,SAAb,GAAyB,IAAzB;AACA;;AAED,MAAGvE,MAAMW,MAAN,CAAa4D,SAAhB,EAA2B;AAC3B,OAAGvE,MAAMwE,iBAAN,CAAwBxE,MAAMmD,IAAN,CAAWsB,UAAnC,KAAkDhE,gBAArD,EAAuE;AACtE,WAAOT,MAAMI,MAAN,CAAaJ,MAAMmD,IAAN,CAAWsB,UAAxB,CAAP;AACA;AACD;;AAED,SAAO3E,QAAQO,cAAR,CAAuBL,KAAvB,CAAP;AACC;AAjBc,CAAjB;;AAoBAa,OAAOC,OAAP,GAAiB6B,QAAjB,C;;;;;;;;;ACtBA,IAAM7C,UAAU,mBAAA4C,CAAQ,CAAR,CAAhB;;AAEA,IAAIE,UAAU;AACbE,MAAK,aAAS9C,KAAT,EAAuB;AAC3B,MAAGA,MAAMW,MAAN,CAAa+D,OAAb,IAAwB1E,MAAMkE,KAAN,CAAYV,MAAZ,KAAuB,CAAlD,EAAqD;AACpDxD,SAAMW,MAAN,CAAa+D,OAAb,GAAuB,KAAvB;AACC;;AAED,MAAG,CAAC1E,MAAMW,MAAN,CAAa+D,OAAd,IAAyB1E,MAAMkE,KAAN,CAAYV,MAAZ,KAAuBxD,MAAMmE,aAAzD,EAAwE;AACvEnE,SAAMW,MAAN,CAAa+D,OAAb,GAAuB,IAAvB;AACA;;AAEA,MAAMC,oBAAoB3E,MAAMmD,IAAN,CAAWC,IAAX,CAAgBwB,uBAAhB,CAA1B;;AAED,MAAG5E,MAAMW,MAAN,CAAa+D,OAAb,IAAwB1E,MAAM6E,KAAN,CAAYF,kBAAkB,CAAlB,CAAZ,KAAqClE,gBAAhE,EAAkF;AAClF,UAAOT,MAAMI,MAAN,CAAauE,kBAAkB,CAAlB,CAAb,CAAP;AACA;;AAEC,SAAO7E,QAAQO,cAAR,CAAuBL,KAAvB,CAAP;AACD;AAjBW,CAAd;;AAoBAa,OAAOC,OAAP,GAAiB8B,OAAjB,C;;;;;;;;;ACtBA;;;;AACA;;;;;;AAEA;AACA;AACA;;AAEA,IAAM9C,UAAU;AACdwC,YAAU,SAASA,QAAT,CAAkBwC,SAAlB,EAAqCC,UAArC,EAAyDC,SAAzD,EAAmF;AAC3F,QAAM/E,SAASC,KAAKC,MAAL,CAAY,QAAZ,CAAf;AACA;AACA,QAAI,iBAAOkB,QAAP,GAAkBQ,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,4BAAOiD,YAAY,mCAAnB;AACA;AACD;;AAED,QAAMG,eAAevD,EAAE4B,MAAF,CAASpD,KAAK0B,MAAd,EAAsB,UAAC5B,KAAD;AAAA,aAAWA,MAAMW,MAAN,CAAaC,IAAb,KAAsBkE,SAAjC;AAAA,KAAtB,CAArB;AACA;AACA,QAAMI,2BAA2BH,aAAaE,aAAapD,MAA3D;;AAEA;AACA,0BAAO,eAAeoD,aAAapD,MAA5B,GAAqC,eAArC,GAAuDiD,SAAvD,GAAmE,YAAnE,GAAkFK,KAAKC,SAAL,CAAeJ,SAAf,CAAlF,GAA8G,QAArH;;AAEA,QAAIE,4BAA4B,CAAhC,EAAmC;AACjC,4BAAOJ,YAAY,2CAAnB;AACA;AACD;;AAED,qBAAO/D,UAAP,CAAkB,EAAEH,MAAMkE,SAAR,EAAmBO,MAAML,SAAzB,EAAlB;;AAEA,SAAK,IAAMlD,SAAX,IAAwBmD,YAAxB,EAAsC;AACpC,UAAIA,aAAapD,MAAb,IAAuBkD,UAA3B,EAAuC;AACrC9E,eAAOqF,UAAP,CAAkBL,aAAanD,SAAb,CAAlB;AACD;AACF;AACF,GA5Ba;AA6BdS,gBAAc,SAASA,YAAT,GAAwB;AACpC,QAAMtC,SAASC,KAAKC,MAAL,CAAY,QAAZ,CAAf;AACA,QAAMe,QAAQ,iBAAOG,QAAP,EAAd;AACA,QAAIH,MAAMW,MAAN,KAAiB,CAArB,EAAwB;AACtB,4BAAO,iBAAP;AACA;AACD;;AAED,QAAI5B,OAAOsF,QAAP,KAAoB,IAAxB,EAA8B;AAC5B,4BAAO,oBAAoBtF,OAAOsF,QAAP,CAAgBC,IAApC,GAA2C,mBAA3C,GAAiEvF,OAAOsF,QAAP,CAAgBE,aAAjF,GAAiG,GAAxG;AACA,4BAAO,oBAAoBN,KAAKC,SAAL,CAAelE,KAAf,CAApB,GAA4C,GAAnD;AACA;AACD,KAJD,MAIO;AACL,4BAAO,2BAAP;AACD;;AAED,QAAMF,cAAcE,MAAM,CAAN,CAApB;;AAEA,QAAMwE,YAAYzF,OAAO0F,cAAP,CAAsB3E,YAAYqE,IAAlC,CAAlB;;AAEA,QAAGK,cAAcE,EAAjB,EAAqB;AACnB,4BAAO,0BAA0BF,SAAjC;AACA;AACD;;AAED,0BAAO,kBAAkB1E,YAAYJ,IAA9B,GAAqC,GAA5C;AACA,QAAMkB,YAAY7B,OAAO4F,WAAP,CAAmB7E,YAAYqE,IAA/B,EAAqCtD,SAArC,EAAgD,EAACnB,MAAMI,YAAYJ,IAAnB,EAAhD,CAAlB;AACA,0BAAO,gBAAP;AACA,qBAAOY,UAAP;AACD;AA1Da,CAAhB;;AA6DAX,OAAOC,OAAP,GAAiBhB,OAAjB,C;;;;;;;;;;;;kBCpEwBgG,M;AAAT,SAASA,MAAT,CAAgBC,OAAhB,EAAiC;AAC9ChD,UAAQC,GAAR,CAAY9C,KAAK8F,IAAL,GAAY,IAAZ,GAAmBD,OAA/B;AACD,C","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5498646d3dc64089f0b2","// @flow\nconst actions = {\n  moveToSpawn: function moveToSpawn(creep: Creep) {\n    const spawn1 = Game.spawns['Spawn1'];\n    return creep.moveTo(spawn1);\n  },\n  withdrawEnergy: function withdrawEnergy(creep: Creep) {\n    const spawn1 = Game.spawns['Spawn1'];\n    const withdrawalStatus = creep.withdraw(spawn1, RESOURCE_ENERGY);\n\n    switch(withdrawalStatus) {\n      case ERR_NOT_IN_RANGE:\n        return actions.moveToSpawn(creep);\n      case ERR_NOT_ENOUGH_RESOURCES:\n        return creep.memory.role = 'harvester';\n    }\n  }\n};\n\nmodule.exports = actions;\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions.js","// @flow\nmodule.exports = {\n  addToQueue: (creepSchema: CreepSchema) => {\n    Memory.queue = Memory.queue.concat(creepSchema)\n    return Memory.queue.slice();\n  },\n  getQueue: () => {\n    if (!Array.isArray(Memory.queue)) {\n      Memory.queue = []\n    }\n    return Memory.queue.slice();\n  },\n  clearQueue: function clearQueue() {\n    Memory.queue = [];\n    return Memory.queue.slice();\n  },\n  flushIfNecessary: function() {\n    if (_.values(Game.creeps).length === _.values(Memory.creeps).length) {\n      return;\n    }\n\n    for (const creepName in Memory.creeps) {\n      if (Game.creeps[creepName] === undefined) {\n          delete Memory.creeps[creepName];\n      }\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/memory.js","// @flow\nconst smallestBody = [WORK,CARRY,MOVE];\nconst smallCarrier = [WORK,CARRY,CARRY,CARRY,MOVE];\n\nimport initRoles from 'role.init';\nimport memoryHandler from 'memory';\nimport mainControls from 'mainControls';\n\nfunction loop() {\n    memoryHandler.flushIfNecessary();\n\n    mainControls.maintain('harvester', 10, smallestBody);\n    mainControls.maintain('upgrader', 2, smallestBody);\n    mainControls.maintain('builder', 1, smallestBody);\n\n    mainControls.processQueue();\n\n    initRoles();\n}\n\nexport { loop };\n\n// Goals\n// - Add typescript\n// - Update all syntax\n// - Folders\n// - Tests\n// - Automatically change harvester / upgrader / builder roles when visiting spawn based on the amount of energy available\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// @flow\nconst roles = {\n    harvester: require('role.harvester'),\n    upgrader: require('role.upgrader'),\n    builder: require('role.builder'),\n};\n\nmodule.exports = function init() {\n    for(const creepName in Game.creeps) {\n        const creep = Game.creeps[creepName];\n        const role = roles[creep.memory.role]\n\n        if (role !== undefined) {\n            role.run(creep);\n        } else {\n            console.log('Creep memory role ', creep.memory.role, ' is undefined');\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/role.init.js","// @flow\nimport actions from 'actions';\n\nfunction moveToEnergySource(creep: Creep) {\n    const sources = creep.room.find(FIND_SOURCES, {\n        filter: (source) => source.energy > 0\n    });\n    if (sources.length === 0) return;\n\n    if(creep.harvest(sources[0]) == ERR_NOT_IN_RANGE) {\n      creep.moveTo(sources[0]);\n    }\n}\n\nfunction canStoreEnergy(structure) {\n    return structure.structureType == STRUCTURE_EXTENSION || structure.structureType == STRUCTURE_SPAWN;\n}\n\nfunction hasCapacity(structure) {\n    return structure.energy < structure.energyCapacity;\n}\n\nexport default {\n  run: function(creep: Creep) {\n    if (creep.ticksToLive < 300) {\n        return actions.moveToSpawn(creep);\n    }\n\n    if(creep.carry.energy < creep.carryCapacity) {\n       return moveToEnergySource(creep);\n    }\n\n    const targetsWithCapacity = creep.room.find(FIND_STRUCTURES, {\n        filter: (structure) => canStoreEnergy(structure) && hasCapacity(structure)\n    });\n\n    if(targetsWithCapacity.length > 0 && creep.transfer(targetsWithCapacity[0], RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\n        return creep.moveTo(targetsWithCapacity[0]);\n    }\n\n    return actions.moveToSpawn(creep);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/role.harvester.js","// @flow\nconst actions = require('actions');\n\nconst upgrader = {\n\trun: function(creep: Creep) {\n\t\tif(creep.memory.upgrading && creep.carry.energy == 0) {\n\t\t\tcreep.memory.upgrading = false;\n\t  }\n\n\t  if(!creep.memory.upgrading && creep.carry.energy == creep.carryCapacity) {\n\t\t  creep.memory.upgrading = true;\n\t  }\n\n\t  if(creep.memory.upgrading) {\n\t\t\tif(creep.upgradeController(creep.room.controller) == ERR_NOT_IN_RANGE) {\n\t\t\t\treturn creep.moveTo(creep.room.controller);\n\t\t\t}\n\t\t}\n\n\t\treturn actions.withdrawEnergy(creep);\n  }\n};\n\nmodule.exports = upgrader;\n\n\n\n// WEBPACK FOOTER //\n// ./src/role.upgrader.js","// @flow\nconst actions = require('actions');\n\nvar builder = {\n\trun: function(creep: Creep) {\n\t\tif(creep.memory.canWork && creep.carry.energy === 0) {\n\t\t\tcreep.memory.canWork = false;\n\t  }\n\n\t  if(!creep.memory.canWork && creep.carry.energy === creep.carryCapacity) {\n\t\t  creep.memory.canWork = true;\n\t  }\n\n    const constructionSites = creep.room.find(FIND_CONSTRUCTION_SITES);\n\n\t  if(creep.memory.canWork && creep.build(constructionSites[0]) == ERR_NOT_IN_RANGE) {\n\t\t\treturn creep.moveTo(constructionSites[0]);\n\t\t}\n\n    return actions.withdrawEnergy(creep);\n  }\n};\n\nmodule.exports = builder;\n\n\n\n// WEBPACK FOOTER //\n// ./src/role.builder.js","// @flow\nimport memory from 'memory';\nimport logger from 'logger';\n\n// function getBodyArray(body) {\n//   return body.reduce((accumulator, bodyPart) => accumulator.concat(bodyPart.type));\n// }\n\nconst actions = {\n  maintain: function maintain(creepRole: string, creepCount: number, creepBody: Array<string>) {\n    const spawn1 = Game.spawns['Spawn1'];\n    // Return if queue is not empty\n    if (memory.getQueue().length > 0) {\n      logger(creepRole + ' role check - queue is not empty.');\n      return;\n    }\n\n    const creepsByRole = _.filter(Game.creeps, (creep) => creep.memory.role === creepRole);\n    // const creepsByRole = _.filter(Game.creeps, (creep) => creep.memory.role === creepRole && getBodyArray(creep.body) === creepBody);\n    const additionalCreepsRequired = creepCount - creepsByRole.length;\n\n    // Return if required creep amount is reached or exceeded\n    logger('Currently ' + creepsByRole.length + ' creeps with ' + creepRole + ' role and ' + JSON.stringify(creepBody) + ' body.');\n\n    if (additionalCreepsRequired <= 0) {\n      logger(creepRole + ' role check - no more creeps is required.');\n      return;\n    }\n\n    memory.addToQueue({ role: creepRole, body: creepBody });\n\n    for (const creepName in creepsByRole) {\n      if (creepsByRole.length <= creepCount) {\n        spawn1.renewCreep(creepsByRole[creepName]);\n      }\n    }\n  },\n  processQueue: function processQueue() {\n    const spawn1 = Game.spawns['Spawn1'];\n    const queue = memory.getQueue();\n    if (queue.length === 0) {\n      logger('Queue is empty.');\n      return;\n    }\n\n    if (spawn1.spawning !== null) {\n      logger('Still spawning ' + spawn1.spawning.name + '. Time remaining ' + spawn1.spawning.remainingTime + '.');\n      logger('Current queue: ' + JSON.stringify(queue) + '.');\n      return;\n    } else {\n      logger('Nothing is being spawned.');\n    }\n\n    const creepSchema = queue[0];\n\n    const canCreate = spawn1.canCreateCreep(creepSchema.body);\n\n    if(canCreate !== OK) {\n      logger('Cannot create creep: ' + canCreate)\n      return;\n    }\n\n    logger('Spawning new ' + creepSchema.role + '.');\n    const creepName = spawn1.createCreep(creepSchema.body, undefined, {role: creepSchema.role});\n    logger('Clearing queue');\n    memory.clearQueue();\n  }\n};\n\nmodule.exports = actions;\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainControls.js","// @flow\nexport default function logger(message: string) {\n  console.log(Game.time + ': ' + message)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/logger.js"],"sourceRoot":""}